// step_bucketsMapping.pug

div#buckets-mapping-step
  h4.import-modal-header Map Your Spreadsheet Columns for Buckets
  p.text-muted.import-modal-subtext
    | Please map each column from your file to the required fields 
    | and any additional “Buckets” fields you want to import.

div#buckets-mapping-fields-container

  // ===========================
  // GROUP 1: REQUIRED
  // ===========================
  div.d-flex.mb-4
    // Client ID
    div.required-field-card.border.p-3.me-3
      div.d-flex.align-items-center.mb-2.mapping-head-container
        i.fas.fa-id-card.fa-lg.me-2.text-primary
        h6.m-0 Client ID
      small.text-muted.mb-3.databox-sub.map-sub(d-block)
        | Used to link to an existing Client record.
      select.form-select(name='clientId', data-required='false')
        option(value='') -- Select Column --

    // Account Number
    div.required-field-card.border.p-3
      div.d-flex.align-items-center.mb-2.mapping-head-container
        i.fas.fa-hashtag.fa-lg.me-2.text-success
        h6.m-0 Account Number
      small.text-muted.mb-3.databox-sub.map-sub(d-block)
        | The unique identifier for the account.
      select.form-select(name='accountNumber', data-required='true')
        option(value='') -- Select Column --
    // ACCOUNT VALUE  (visually required – not enforced)
    div.required-field-card.border.p-3.ms-3
      div.d-flex.align-items-center.mb-2.mapping-head-container
        i.fas.fa-dollar-sign.fa-lg.me-2.text-warning
        h6.m-0 Account Value
      small.text-muted.mb-3.databox-sub.map-sub(d-block)
        | Current total value of the imported account.
      // ⚠️ not strictly required, so data-required='false'
      select.form-select(name='accountValue', data-required='false')
        option(value='') -- Select Column --    


  // ===========================
  // GROUP 2: WITHDRAW AMOUNT & FREQUENCY
  // ===========================
  .asset-allocation-mapping-fields
    h5.mt-4.import-modal-header Monthly Distribution
    p.text-muted.import-modal-subtext
          | Map the systematic withdraw amount and systematic withdraw frequency.
          | The system expects a numerical value for withdraw amount
          | and values such as 'quarterly', 'annual', and 'monthly'
          | for withdraw frequency. Our system automatically calculates the household monthly distribution rate based on your input.

  div.row.mb-4.monthly-distribution-fields
    .col-md-6
      .mapping-row.mb-3
        label.field-label(for='systematicWithdrawAmount') Systematic Withdraw Amount
        select.form-select(name='systematicWithdrawAmount')
          option(value='') -- Select Column --

    .col-md-6
      .mapping-row.mb-3
        label.field-label(for='systematicWithdrawFrequency') Systematic Withdraw Frequency
        select.form-select(name='systematicWithdrawFrequency')
          option(value='') -- Select Column --

  // ===========================
  // GROUP 3: ASSET ALLOCATION
  // ===========================
  .asset-allocation-mapping-fields
    h5.mt-4.import-modal-header Asset Allocation
    p.text-muted.import-modal-subtext
          | Map each asset allocation field to one or more spreadsheet columns.
          | The system expects these values to be percentages (0–100).
          | You can click the (+) button to map multiple columns to the same field;
          | they will be summed during import.

    .row.asset-allocation-row
      // CASH
      .col-md-3.mb-3
        label.form-label(for='cash-allocation') Cash (%)
        div#cash-allocation-container
          select.form-select(name='cash')
            option(value='') -- Select Column --
        button.btn.btn-sm.btn-outline-secondary.mt-1.add-allocation-btn(
          type='button'
          data-field='cash'
        ) +

      // INCOME
      .col-md-3.mb-3
        label.form-label(for='income-allocation') Income (%)
        div#income-allocation-container
          select.form-select(name='income')
            option(value='') -- Select Column --
        button.btn.btn-sm.btn-outline-secondary.mt-1.add-allocation-btn(
          type='button'
          data-field='income'
        ) +

      // ANNUITIES
      .col-md-3.mb-3
        label.form-label(for='annuities-allocation') Annuities (%)
        div#annuities-allocation-container
          select.form-select(name='annuities')
            option(value='') -- Select Column --
        button.btn.btn-sm.btn-outline-secondary.mt-1.add-allocation-btn(
          type='button'
          data-field='annuities'
        ) +

      // GROWTH
      .col-md-3.mb-3
        label.form-label(for='growth-allocation') Growth (%)
        div#growth-allocation-container
          select.form-select(name='growth')
            option(value='') -- Select Column --
        button.btn.btn-sm.btn-outline-secondary.mt-1.add-allocation-btn(
          type='button'
          data-field='growth'
        ) +
